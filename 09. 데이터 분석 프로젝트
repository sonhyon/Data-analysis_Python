#분석 준비하기
1. 데이터 준비하기
2. 패키지 설치 및 로드하기
pip install pyreadstat #아나콘다 프롬포트에서 설치
import pandas as pd #데이터를 분석하는 데 필요한 패키지를 로드하기
import numpy as np
import seaborn as sns

3. 데이터 불러오기
raw_welfare = pd.read_spss("Koweps_hpwc14_2019_beta2.sav")
welfare = raw_welfare.copy()

4. 데이터 검토하기
welfare #암부분, 뒷부분 출력
welfare.shape() #행, 열 개수 출력
welfare.info() #변수 속성 출력
welfare.describe() #요약 통계량

5. 변수명 바꾸기
welfare = welfare.rename(
  columns = {'h14_g3' : 'sex'
                     ...
                     ...})

[성별에 따른 월급 차이 - 성별에 따라 월급이 다를까?]
#성별 변수 검토 및 전처리하기
1. 변수 검토하기
welfare['sex'].dtypes #변수 타입 출력
welfare['sex'].value_counts() #빈도 구하기

2. 전처리하기
welfare['sex'].value_counts() #이상치 확인
welfare['sex'] = np.where(welfare['sex'] == 9, np.nan, welfare['sex']) #이상치 결측 처리
welfare['sex'].insa().sum() #결측치 확인
welfare['sex'] = np.where(welfare['sex'] == 1, 'male', 'female') #성별 황목 이름 부여
welfare['sex'].value_counts() #빈도 구하기
sns.countplot(data=welfare, x='sex') #빈도 막대 그래프 만들기

#월급 변수 검토 및 전처리하기
1. 변수 검토하기
welfare['income'].dtypes #변수 타입 출력
welfare['income'].describe() #요약 통계량 구하기
sns.histplot(data = welfare, x='income') #히스토그램 만들기

2. 전처리하기
welfare['income'].describe() #이상치 확인
welfare['income'].isna.sum() #결측치 확인
welfare['income'] = np.where(welfare['income'] == 9999, np.nan, welfare['income']) #이상치 결측 처리
welfare['income'].isna.sum() #결측치 확인

#성별에 따른 월급 차이 분석하기
sex_income = welfare.dropna(subset = 'income') \             #income 결측치 제거
                    .gorupby('sex', as_index = False) \      #sex별 분리
                    .agg(mean_income = ('income', 'mean'))   #income 평균 구하기

sns.barplot(data = sex_income, x = 'sex', y = 'mean_income') #그래프 만들기


[나이와 월급의 관계 - 몇 살 때 월급을 가장 많이 받을까?]
#나이 변수 검토 및 전처리하기
1. 변수 검토하기
welfare['birth'].dtypes
welfare['birth'].describe()
sns.histplot(data=welfare, x='birth')

2. 전처리하기
welfare['birth'].describe()
welfare['birth'].isna().sum()
welfare['birth'] = np.where(welfare['birth'] == 9999, np.nan, welfare['birth'])
welfare['birth'].isna().sum()

3. 파생변수 만들기 - 나이
welfare = welfare.assign(age = 2019 - welfare['birth'] + 1)
welfare['age'].describe()
sns.histplot(data = welfare, x = 'age')

#나이와 월급 관계 분석하기
1. 나이에 따른 월급 평균표 만들기
age_income = welfare.dropna(subset = 'income') \
                    .groupby('age') \
                    .agg(mean_income = ('income', 'mean'))
age_income.head()

2. 그래프 만들기
sns.lineplot(data = age_income, x = 'age', y = 'mean_income')
